# AGENTS.md – Механическое ядро «Хисуи»

> **Цель файла** – зафиксировать в одном месте все базовые правила, которые мы используем в кампании «Хисуя» после перехода с чистого LUMEN на модифицированную кубовую механику *Genesys*.
>
> - Раздел 1–3 — справочное пособие (читается один раз).
> - Раздел 4–7 — живой рабочий документ; сюда будут приноситься правки по мере тестов.
> - Отдельный файл `SKILLS.md` хранит полный список навыков и их мини‑описания.

---

## 1. Быстрый обзор

|               | **LUMEN** (до)                  | **Genesys** (после)        | **Наш гибрид**                            |
| ------------- | ------------------------------- | -------------------------- | ----------------------------------------- |
| **Подходы**   | Нажим / Маневр / Фокус (3d6)    | 6 характеристик, d8+d12    | Сохраняем 3 подхода                       |
| **Навыки**    | Отсутствуют ⇢ таланты           | 50+ фиксированных          | Вводим собственный список                 |
| **Бросок**    | 1–3 + d6 (success/partial/fail) | «Кубовая горка» (S/Adv/Tr) | Кубовая горка, но с кастомными списками   |
| **Результат** | Успех / Частично / Провал       | S/Adv/Tr/Threat/Desp.      | Любая комбинация, трактуем «да/нет, и/но» |

---

## 2. Основы LUMEN

1. **Подходы** описывают *стиль* героя, а не категорию задач.
2. **Фазы хода:** Способность → Действие → Движение.
3. **Частичный успех** — ключ к быстрому темпу и реактивности.
4. **Таланты** могут тратить особый пул ресурса, который уникален для каждого персонажа.

### Что нам важно оставить

- Три подхода как визитная карточка персонажа.
- Скорость: вся сборка броска ≤ 10 секунд.
- Возможность «таланта на крит» (спар‑шоты и т. д.).

---

## 3. Основы Genesys (с учётом упрощений)

| Куб                       | Функция               | Для нас важно               |
| ------------------------- | --------------------- | --------------------------- |
| Зелёный d8 (способность)  | Базовая грань подхода | 1–3 шт. по значению подхода |
| Жёлтый d12 (мастерство)   | Навык/талант          | 0–3, апгрейд зелёных        |
| Синий d6 (бонус)          | Поддержка / позиция   | По ситуации                 |
| Фиолетовый d8 (сложность) | Базовая трудность     | 1–3 шт.                     |
| Красный d12 (вызов)       | Риск / элита          | GM апгрейд                  |
| Чёрный d6 (штраф)         | Помехи                | Тьма, усталость             |



---

## 4. Сборка броска (текущая версия)

1. **Определите подход** (Нажим / Маневр / Фокус) – столько зелёных кубов.
2. **Навык** (если есть) – апгрейд зелёных → жёлтые в зависимости от уровня.
3. **Сложность**: обычно 2 фиолетовых. Уменьшить/повысить по таблице 3.\
   *Минимальная проверка* – 1 фиолетовый. *Элита* – 2+ красных.
4. **Бонусы / штрафы** – синие / чёрные из условий сцены.
5. **Таланты**: могут добавлять синий, апгрейд зелёного, или влиять на результат.

---

## 5. Толкование результатов

- **Успех > Провал** → действие совершено.
- **Преимущества** → мелкие плюсы, системой не обрабатываются.
- **Угрозы** → GM вводит Setback, микротравму, трату ресурса.
- **Triumph / Despair** → сюжетный поворот одной фразой.

> **Спар‑шот** (пример таланта) – если в итоговой куче остался Triumph, герой делает мгновенную вторую атаку без новых бонусных кубов.

---

## 6. Адаптация персонажей

| Старое поле            | Новое поле                    | Как конвертировать                    |
| ---------------------- | ----------------------------- | ------------------------------------- |
| Нажим 1–3              | Нажим 1–3                     | Без изменений                         |
| Stress / Momentum      | Ресурс, заполняемое           | 1:1                                   |
| Умение «Стрельба» (d6) | Навык «Стрелковое оружие» 1–3 | 1 ранг ≈ +1 жёлтый (в замен зеленого) |
| Таланты                | Talents                       | Переписать условия на Symbols         |

---

---

## 7. Реализация листа персонажа в Foundry

| Функция                      | Краткое описание                                                                                                                                                                                   | Требуемые шаги                                                                                                                                                        |
| ---------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Нарративные способности**  | В листе есть поле **“Abilities”** с удобным rich-text-редактором; у каждой способности указывается расход ресурса. При нажатии кнопки в чате выводится описание и автоматически вычитается ресурс. | 1. Добавить `abilities` массив в actorData.2. Кнопка `useAbility` → chatMessage + hook вычёта из `actor.system.resource`.3. Разметка в `character.html` (Handlebars). |
| **Генератор броска Genesys** | Авто-сборка «зелёные → жёлтые + сложность + бонус/штраф».                                                                                                                                          | Оставляем штатный `genesys/rollSkill.js`; скрываем лишние характеристики и таланты.                                                                                   |
| **Гибкие поля**              | Добавлять кастом-блоки типа: «текст», «число», «чекбокс».                                                                                                                                          | Использовать `foundry-form-config` или простую `repeatable section` в Handlebars.                                                                                     |

> ❗ **Важно:**
>
> - Все изменения необходимо сверять с официальной документацией Foundry и оригинальным репозиторием Genesys-системы.
> - По возможности используем уже готовые функции и шаблоны, не создавая дубликаты.
> - Вся система интерфейса должна быть **полностью русифицирована**.
> - Перевод старых надписей, терминов и кнопок — **одна из приоритетных задач**.
> - Так же задача проекта - переделать генезис под упрощенную, хисуйскую версию. Ненужные части в процессе можно отключить и позже удалить.

\---------|------------------|----------------|
\| **Нарративные способности** | В листе есть поле **“Abilities”** с удобным rich‑text‑редактором; у каждой способности указывается расход ресурса. При нажатии кнопки в чате выводится описание и автоматически вычитается ресурс. | 1. Добавить `abilities` массив в actorData.2. Кнопка `useAbility` → chatMessage + hook вычёта из `actor.system.resource`.3. Разметка в `character.html` (Handlebars). |
\| **Генератор броска Genesys** | Авто‑сборка «зелёные → жёлтые + сложность + бонус/штраф». | Оставляем штатный `genesys/rollSkill.js`; скрываем лишние характеристики и таланты. |
\| **Гибкие поля** | Добавлять кастом‑блоки типа: «текст», «число», «чекбокс». | Использовать `foundry-form-config` или простую `repeatable section` в Handlebars. |

> **Мини‑беклог**: после тестовой сессии уточнить списки полей и формат хранения `abilities` (JSON vs флаги).

---

*Документ актуален на ******июнь 2025******. Все предложения и ловкие хаки смело заносите в Issues репозитория или прямой правкой этого файла.*

